---
id: 2354
title: Configure Cryptocard radius with VMware View 5.1
date: 2012-06-07T22:25:00+02:00
author: Sven Huisman
layout: post
guid: http://virtualfuture.info/?p=2354
permalink: /2012/06/configure-cryptocard-radius-with-vmware-view-5-1/
categories:
  - Virtual Desktop
tags:
  - Cryptocard
  - RADIUS
  - View
  - VMware
  - VMware View 5.1
---
One of the new features of VMware View 5.1 is the ability to use 2-factor authentication using RADIUS. During the beta of VMware View 5.1 I’ve tested Cryptocard (now part of SafeNet) and in this post I describe how it works. I’ve tested using a challenge-response (using SMS token) and using a one-time passcode (generated by a token).

**Challenge-response (using SMS token)**

First I’m going to test 2-factor authentication using a challenge-response using an SMS token. Challenge-response means that the user first needs to enter their active directory credentials against the radius server (challenge). After that, the user will receive a code (response). The code needs to be entered in the next field.

Assuming you have configured the Cryptocard Blackshield server and Radius, I’m going to configure the View Connection Server. Go to the View Connection Server settings > Authentication:

<!--more-->

&nbsp;

[<img style="background-image: none; padding-top: 0px; padding-left: 0px; display: inline; padding-right: 0px; border: 0px;" title="1" src="https://svenhuisman.com/wp-content/uploads/2012/06/1_thumb.png" alt="1" width="445" height="287" border="0" />](https://svenhuisman.com/wp-content/uploads/2012/06/1.png)

Select **RADIUS** and create a new Authenticator:

[<img style="background-image: none; padding-top: 0px; padding-left: 0px; display: inline; padding-right: 0px; border: 0px;" title="2" src="https://svenhuisman.com/wp-content/uploads/2012/06/2_thumb.png" alt="2" width="444" height="287" border="0" />](https://svenhuisman.com/wp-content/uploads/2012/06/2.png)

Fill in the required fields:

[<img style="background-image: none; padding-top: 0px; padding-left: 0px; display: inline; padding-right: 0px; border: 0px;" title="9-3-2012 14-10-45" src="https://svenhuisman.com/wp-content/uploads/2012/06/9-3-2012-14-10-45_thumb.png" alt="9-3-2012 14-10-45" width="297" height="354" border="0" />](https://svenhuisman.com/wp-content/uploads/2012/06/9-3-2012-14-10-45.png)

Now it’s time to test the connection:

[<img style="background-image: none; padding-top: 0px; padding-left: 0px; display: inline; padding-right: 0px; border: 0px;" title="3" src="https://svenhuisman.com/wp-content/uploads/2012/06/3_thumb.png" alt="3" width="442" height="297" border="0" />](https://svenhuisman.com/wp-content/uploads/2012/06/3.png)

So the first thing you notice is that the VMware View client is asking for the “Cryptocard” user name and passcode. But in fact, you have to enter your Active Directory credentials. This is how the RADIUS-feature works in this release of VMware View. It is not possible to adjust this text or these labels, or let the RADIUS respond with the correct fields. Hopefully, this will be added in the next release.

After you entered your Active Directory credentials, you get the next field, the response field. Now it’s time to enter your SMS-code you received:

[<img style="background-image: none; padding-top: 0px; padding-left: 0px; display: inline; padding-right: 0px; border: 0px;" title="4" src="https://svenhuisman.com/wp-content/uploads/2012/06/4_thumb.png" alt="4" width="442" height="267" border="0" />](https://svenhuisman.com/wp-content/uploads/2012/06/4.png)

After this, you are logged on and ready to select a desktop.

**One-time passcode**

Now it’s time to test VMware View with a One-time passcode. In this test, I used a KT4 token:

[<img style="background-image: none; padding-top: 0px; padding-left: 0px; display: inline; padding-right: 0px; border: 0px;" title="keyfob-tokens-kt4" src="https://svenhuisman.com/wp-content/uploads/2012/06/keyfob-tokens-kt4_thumb.jpg" alt="keyfob-tokens-kt4" width="214" height="107" border="0" />](https://svenhuisman.com/wp-content/uploads/2012/06/keyfob-tokens-kt4.jpg)

First, configure the View Connection Server. Go to the View Connection Server settings > Authentication:

[<img style="background-image: none; padding-top: 0px; padding-left: 0px; display: inline; padding-right: 0px; border: 0px;" title="9-3-2012 14-11-41" src="https://svenhuisman.com/wp-content/uploads/2012/06/9-3-2012-14-11-41_thumb.png" alt="9-3-2012 14-11-41" width="415" height="266" border="0" />](https://svenhuisman.com/wp-content/uploads/2012/06/9-3-2012-14-11-41.png)

I use the “Cryptocard” authenticator I created earlier and checked “Enforce 2-factor and Windows user name matching and “Use same username and password for RADIUS and Windows authentication.

Now it’s time to test the connection:

[<img style="background-image: none; padding-top: 0px; padding-left: 0px; margin: 0px; display: inline; padding-right: 0px; border: 0px;" title="crypto-kt4-view51" src="https://svenhuisman.com/wp-content/uploads/2012/06/crypto-kt4-view51_thumb.png" alt="crypto-kt4-view51" width="380" height="256" border="0" />](https://svenhuisman.com/wp-content/uploads/2012/06/crypto-kt4-view51.png)

As you can see, the user name and passcode fields are this time correct, you will have to enter your username and the one-time passcode from the token. Then you will see the next login-screen:

[<img style="background-image: none; padding-top: 0px; padding-left: 0px; display: inline; padding-right: 0px; border: 0px;" title="crypto-kt4-view51-2" src="https://svenhuisman.com/wp-content/uploads/2012/06/crypto-kt4-view51-2_thumb.png" alt="crypto-kt4-view51-2" width="378" height="288" border="0" />](https://svenhuisman.com/wp-content/uploads/2012/06/crypto-kt4-view51-2.png)

Here you will have to enter your Active Directory password. After you entered your password, you will be presented with the desktop pools you are entitled to.

**Conclusion**: 2-factor authentication using Cryptocard works, VMware View needs some work to correctly work with challenge-response.